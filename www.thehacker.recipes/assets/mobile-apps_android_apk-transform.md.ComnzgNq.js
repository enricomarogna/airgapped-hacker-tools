import{_ as s,c as i,a5 as e,o as t}from"./chunks/framework.B5CpDqM0.js";const c=JSON.parse('{"title":"APK transform","description":"Pimp my APK","frontmatter":{"description":"Pimp my APK","authors":"ShutdownRepo"},"headers":[],"relativePath":"mobile-apps/android/apk-transform.md","filePath":"mobile-apps/android/apk-transform.md","lastUpdated":1724982529000}'),n={name:"mobile-apps/android/apk-transform.md"};function l(p,a,r,o,h,d){return t(),i("div",null,a[0]||(a[0]=[e(`<h1 id="apk-transform" tabindex="-1">APK transform <a class="header-anchor" href="#apk-transform" aria-label="Permalink to &quot;APK transform&quot;">​</a></h1><h2 id="theory" tabindex="-1">Theory <a class="header-anchor" href="#theory" aria-label="Permalink to &quot;Theory&quot;">​</a></h2><p>An .APK file (e.g. Android Package) is a compressed collection of files (i.e. a package) for Android. It could be extracted as an regular archive.</p><p>A .DEX file (.e.g Dalvik EXecutable) is an executable file saved in a format that contains compiled code that Android systems can run.</p><p>When auditing an APK, transforming it to human-readable formats is usually required.</p><ul><li><a href="https://github.com/JesusFreke/smali" target="_blank" rel="noreferrer">smali</a> and <a href="https://github.com/JesusFreke/smali" target="_blank" rel="noreferrer">baksmali</a> are DEX assembler and disassembler respectively</li><li><a href="https://github.com/pxb1988/dex2jar" target="_blank" rel="noreferrer">d2j-dex2jar</a> can be used to convert DEX files to .class files (zipped as .jar)</li><li><a href="https://github.com/skylot/jadx" target="_blank" rel="noreferrer">jadx</a> is a DEX to Java decompiler. It can be used in CLI and GUI for producing Java source code out of Android DEX and APK files.</li></ul><h2 id="practical" tabindex="-1">Practical <a class="header-anchor" href="#practical" aria-label="Permalink to &quot;Practical&quot;">​</a></h2><details class="details custom-block"><summary>Install notes</summary><h3 id="add-kali-repo-to-your-sources" tabindex="-1">Add Kali repo to your sources <a class="header-anchor" href="#add-kali-repo-to-your-sources" aria-label="Permalink to &quot;Add Kali repo to your sources&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>echo &quot;deb http://http.kali.org/kali kali-rolling main contrib non-free&quot; &gt;&gt; /etc/apt/sources.list </span></span>
<span class="line"><span></span></span>
<span class="line"><span>apt-get update</span></span></code></pre></div><p>Note that if you haven’t updated your Kali installation in some time, you will like receive a GPG error about the repository key being expired (<code>ED444FF07D8D0BF6</code>). Fortunately, this issue is quickly resolved by running the following as root:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>wget -q -O - https://archive.kali.org/archive-key.asc | apt-key add</span></span></code></pre></div><h3 id="install-softwares" tabindex="-1">Install softwares <a class="header-anchor" href="#install-softwares" aria-label="Permalink to &quot;Install softwares&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>apt install unzip smali apktool dex2jar jadx</span></span></code></pre></div></details><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Uncompress an APK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application.apk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./application-unzipped/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Disassemble DEX</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">baksmali</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./application-unzipped/classes.dex</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./application-unzipped/classes.dex.out/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/dev/null</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Convert .DEX files to JAVA Jar file (.class files)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">d2j-dex2jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application.apk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application.jar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Decompile .DEX files</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jadx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application.apk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -j</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^processor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /proc/cpuinfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./application-jadx/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/null</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Unpack the APK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apktool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application.apk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./application-unpacked/</span></span></code></pre></div><h2 id="resources" tabindex="-1">Resources <a class="header-anchor" href="#resources" aria-label="Permalink to &quot;Resources&quot;">​</a></h2><p><a href="https://github.com/nullenc0de/reverse-apk" target="_blank" rel="noreferrer">https://github.com/nullenc0de/reverse-apk</a></p><p><a href="https://ibotpeaches.github.io/Apktool/" target="_blank" rel="noreferrer">https://ibotpeaches.github.io/Apktool/</a></p>`,12)]))}const u=s(n,[["render",l]]);export{c as __pageData,u as default};
